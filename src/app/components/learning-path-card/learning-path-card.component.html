<div class="learning-path-card" [class.is-interactive]="generated" (click)="generated && cardClick.emit()">

    @if (generated) {
    <div class="lp-left">
        <div class="lp-title-row">
            <h4 class="lp-title" [title]="learningPath.name">{{ learningPath.name }}</h4>
        </div>
        <div class="lp-meta">
            <span class="lp-author">Por {{ learningPath.creator.name }}</span>
            @if (learningPath.validated) {
            <span class="lp-sep">â€¢</span>
            <span class="lp-validated"><mat-icon>check</mat-icon> Validada</span>
            }
        </div>
    </div>

    <div class="lp-right">
        <span class="lp-chip">{{ learningPath.type }}</span>
        <button mat-icon-button (click)="$event.stopPropagation(); addToChat.emit()" pTooltip="Adicionar ao chat"
            [style]="inChat ? 'visibility: hidden' : ''">
            <mat-icon>chat_bubble</mat-icon>
        </button>
        @if (mine) {
        <div class="lp-share" (click)="$event.stopPropagation()">
            <p-toggleswitch [(ngModel)]="learningPath.shared"
                (ngModelChange)="sharedChange.emit(learningPath.shared)" />
            <span>Compartilhada</span>
        </div>
        }
    </div>
    }

    @else if (generating) {
    <div class="lp-left">
        <div class="lp-title-row">
            <h4 class="lp-title" [title]="learningPath.name">{{ learningPath.name }}</h4>
            <span class="lp-chip">{{ learningPath.type }}</span>
        </div>
        <div class="lp-loading">
            <o-loading [isLoading]="true" [local]="true" size="22px" />
            <span>Gerando rota...</span>
        </div>
    </div>
    }

    @else if (failed) {
    <div class="lp-left">
        <div class="lp-title-row">
            <h4 class="lp-title" [title]="learningPath.name">{{ learningPath.name }}</h4>
            <span class="lp-chip error">{{ learningPath.type }}</span>
        </div>
        <div class="lp-error-row">
            <mat-icon>error</mat-icon>
            <span class="lp-error-text">{{ learningPath.generation.errorMessage }}</span>
            <o-text-button (onclick)="regenerate.emit()">Gerar novamente</o-text-button>
        </div>
    </div>
    }

</div>