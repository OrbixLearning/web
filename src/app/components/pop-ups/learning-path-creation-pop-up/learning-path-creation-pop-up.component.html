<o-pop-up-header title="Criar rota de aprendizagem" />

<o-loading [isLoading]="isLoading" />

<!-- WRAPPER -->
<div class="page">
  <!-- CARD 1 -->
  <section class="card">
    <h2 class="card-title">Informa√ß√µes B√°sicas</h2>

    <form class="form-grid" [formGroup]="form">
      <!-- Nome da Rota + Tipo de Conte√∫do -->
      <div class="row">
        <div class="field col-7">
          <label class="label">Nome da Rota<span class="req">*</span></label>
          <input class="input" type="text" placeholder="Ex: Introdu√ß√£o √†s Derivas" formControlName="name" />
          <div class="error" *ngIf="form.get('name')?.touched && form.get('name')?.invalid">
            Campo obrigat√≥rio.
          </div>
        </div>

        <div class="field col-5">
          <label class="label">Tipo de Conte√∫do<span class="req">*</span></label>
          <div class="select">
            <mat-select formControlName="contentType">
              <mat-option value="text">Conte√∫do do Texto</mat-option>
              <mat-option value="video">V√≠deo</mat-option>
              <mat-option value="audio">√Åudio</mat-option>
              <mat-option value="pdf">PDF</mat-option>
            </mat-select>
          </div>
        </div>
      </div>

      <!-- Descri√ß√£o -->
      <div class="row">
        <div class="field col-12">
          <label class="label">Descri√ß√£o</label>
          <textarea
            class="textarea"
            rows="5"
            placeholder="Descreva o que os alunos ir√£o aprender nesta rota..."
            formControlName="description"
          ></textarea>
        </div>
      </div>

      <!-- M√≥dulo / Tempo Estimado / Aluno / Configura√ß√µes -->
      <div class="row">
        <div class="field col-4">
          <label class="label">M√≥dulo</label>
          <div class="select">
            <mat-select formControlName="moduleId">
              <mat-option [value]="null">Selecione um m√≥dulo</mat-option>
              <mat-option *ngFor="let m of modules" [value]="m.value">{{ m.label }}</mat-option>
            </mat-select>
          </div>
        </div>

        <div class="field col-4">
          <label class="label">Tempo Estimado</label>
          <div class="select">
            <mat-select formControlName="estimatedTime">
              <mat-option [value]="null">Ex: 30 min</mat-option>
              <mat-option *ngFor="let t of times" [value]="t.value">{{ t.label }}</mat-option>
            </mat-select>
          </div>
        </div>

        <div class="field col-4">
          <label class="label">Aluno</label>
          <div class="select">
            <mat-select formControlName="studentId">
              <mat-option [value]="null">Selecionar o aluno que ser√° dado a rota</mat-option>
              <mat-option *ngFor="let a of students" [value]="a.value">{{ a.label }}</mat-option>
            </mat-select>
          </div>
        </div>
      </div>

      <div class="row settings-row">
        <div class="field col-12">
          <label class="label">Configura√ß√µes</label>

          <div class="config">
            <mat-slide-toggle formControlName="shareWithOthers" color="primary"></mat-slide-toggle>
            <span class="config-text">Compartilhar ou n√£o com outros alunos</span>
          </div>
        </div>
      </div>
    </form>
  </section>

  <!-- CARD 2 -->
  <section class="card">
    <div class="section-header">
      <span class="section-icon" aria-hidden="true">üìÑ</span>
      <h3 class="section-title">Conte√∫do Rota</h3>
    </div>

    <div class="field">
      <label class="label">Conte√∫do Educacional</label>
      <textarea
        class="textarea big purple-outline"
        rows="12"
        placeholder="Digite o Conte√∫do educacional aqui..."
        formControlName="educationalContent"
      ></textarea>
    </div>

    <div class="actions">
      <button mat-flat-button color="primary" class="btn-primary" (click)="save()" [disabled]="isLoading">
        Salvar Item
      </button>
      <button mat-stroked-button class="btn-secondary" (click)="cancel()" [disabled]="isLoading">
        Cancelar
      </button>
    </div>
  </section>
</div>
