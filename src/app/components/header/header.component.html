<header>
    <div class="left-header">
        <button mat-button (click)="sidebar.emit()" class="menu-button">
            <mat-icon>menu</mat-icon>
        </button>

        <img [src]="logo" alt="Logo" style="max-height: 50px; max-width: 50px; cursor: pointer;" (click)="goToHome()" />

        <p-select [options]="institutions" optionValue="id" [(ngModel)]="selectedInstitutionId" [checkmark]="true"
            [loading]="institutions.length === 0" optionLabel="name" placeholder="Selecione uma Instituição"
            class="selector" (ngModelChange)="changeInstitution($event)" />

        @if (canConfigureInstitution) {
        <button mat-icon-button (click)="goToSettings()">
            <mat-icon>settings</mat-icon>
        </button>
        }
    </div>

    <div class="right-header">
        <button mat-icon-button (click)="toggleTheme()" aria-label="Mudar tema">
            @if (currentTheme === 'light') {
                <mat-icon>light_mode</mat-icon>
            } @else {
                <mat-icon>dark_mode</mat-icon> }
        </button>

        <button mat-icon-button (click)="goToReport()">
            <mat-icon>bug_report</mat-icon>
        </button>
        
        <button mat-icon-button [matMenuTriggerFor]="profileMenu" class="profile-menu-button">
            <img [src]="profilePictureUrl" alt="Foto de Perfil" class="profile-picture" />
        </button>

        <mat-menu #profileMenu="matMenu" xPosition="before">
            <button mat-menu-item (click)="goToProfile()">
                <mat-icon>person</mat-icon>
                <span>Perfil</span>
            </button>
            <button mat-menu-item (click)="logout()">
                <mat-icon>logout</mat-icon>
                <span>Sair</span>
            </button>
        </mat-menu>
    </div>
</header>