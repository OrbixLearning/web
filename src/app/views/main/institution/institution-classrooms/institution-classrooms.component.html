<o-loading [isLoading]="isLoading" />

<!-- Header -->
<header class="ics-header">
    <button mat-icon-button [routerLink]="['/i/' + this.ctx.institution?.id + '/settings']">
        <mat-icon>arrow_back</mat-icon>
    </button>

    <div>
        <button mat-raised-button (click)="createClassroom()">
            Criar turmas
        </button>

        <button mat-raised-button [disabled]="selectedClassrooms.length === 0" (click)="deleteSelectedClassrooms()">
            Excluir turmas
        </button>
    </div>
</header>

<!-- Table -->
<p-table [value]="classrooms" size="small" dataKey="id" [lazy]="true" (onLazyLoad)="getClassrooms($event)"
    [loading]="isLoading" [(selection)]="selectedClassrooms" [first]="paginationFirst" [paginator]="true" [rows]="10"
    [rowsPerPageOptions]="[5, 10, 20, 30]" [showCurrentPageReport]="true" [totalRecords]="totalRecords"
    currentPageReportTemplate="Página {currentPage} de {totalPages}" paginatorPosition="both" [tableStyle]="tableStyle">

    <ng-template #header>

        <!-- Filters -->
        <tr>
            <th></th>
            <th></th>
            <th>
                <p-columnFilter [showMenu]="false" type="text" field="name" placeholder="Filtrar nome" />
            </th>
            <th></th>
            <th></th>
        </tr>

        <!-- Header -->
        <tr>
            <th><p-tableHeaderCheckbox /></th>
            <th style="width:20%">Ícone</th>
            <th style="width:30%">Nome</th>
            <th style="width:25%">Ementa</th>
            <th style="width:20%">Configurar</th>
        </tr>

    </ng-template>
    <ng-template #body let-classroom let-editing="editing">

        <!-- Body -->
        <tr>
            <td> <p-tableCheckbox [value]="classroom" /> </td>
            <td><mat-icon>{{ classroom.icon }}</mat-icon></td>
            <td>{{ classroom.name }}</td>
            <td>{{ classroom.syllabus?.length }}</td>
            <td>
                <button mat-icon-button [routerLink]="['/i/' + ctx.institution?.id + '/c/' + classroom.id]">
                    <mat-icon>{{ classroom.icon }}</mat-icon>
                </button>
            </td>
        </tr>

    </ng-template>
</p-table>